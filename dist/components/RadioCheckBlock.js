var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=RadioCheckBlock;var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _Control=_interopRequireDefault(require("./Control"));var _Buttons=require("./Buttons");var _utils=require("../utils");var _styles=require("../styles");var _jsxRuntime=require("react/jsx-runtime");function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var r=new WeakMap(),n=new WeakMap();return(_interopRequireWildcard=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;var o,i,f={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return f;if(o=t?n:r){if(o.has(e))return o.get(e);o.set(e,f);}for(var _t in e)"default"!==_t&&{}.hasOwnProperty.call(e,_t)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,_t))&&(i.get||i.set)?o(f,_t,i):f[_t]=e[_t]);return f;})(e,t);}function RadioCheckBlock(props){var setValue=props.setValue,setNestedValue=props.setNestedValue,block=props.block,blockState=props.blockState;var _block$properties=block.properties,properties=_block$properties===void 0?{}:_block$properties;var _useWindowDimensions=(0,_reactNative.useWindowDimensions)(),width=_useWindowDimensions.width;var showAsRow=width>400;var _useMemo=(0,_react.useMemo)(function(){var elements=(0,_utils.getElementsHandleExtra)({elements:properties.elements,elements_extra:properties.elements_extra});if(properties.reverseScore){return{elements:elements,elementList:(0,_utils.objectKeys)(elements).reverse()};}if(properties.randomize){var _properties$elements_;return{elements:elements,elementList:(0,_utils.shuffleArray)((0,_utils.objectKeys)(elements),(0,_utils.objectKeys)((_properties$elements_=properties.elements_extra)!=null?_properties$elements_:{}).length>0)};}return{elements:elements,elementList:(0,_utils.objectKeys)(elements)};},[properties]),elements=_useMemo.elements,elementList=_useMemo.elementList;return(0,_jsxRuntime.jsx)(_reactNative.View,{style:block.properties.show_as_buttons&&showAsRow?styles.buttonsRow:block.properties.show_as_buttons?styles.buttonsCol:null,children:elementList.map(function(elementKey){var _elements$elementKey,_element$value,_blockState$element$d;var element=(_elements$elementKey=elements[elementKey])!=null?_elements$elementKey:{};var isChecked=block.typeName!=='checkbox'?blockState.value===((_element$value=element.value)!=null?_element$value:element.label):((_blockState$element$d=blockState[element.data_field])==null?void 0:_blockState$element$d.value)===true;var InputComponent=block.properties.show_as_buttons?_Buttons.ToggleButton:_Control.default;return(0,_jsxRuntime.jsx)(_reactNative.View,{children:(0,_jsxRuntime.jsx)(InputComponent,{checked:isChecked,label:element.label,title:element.label,prependIcon:element.icon,onPress:function onPress(){if(block.typeName==='checkbox'){setNestedValue(!isChecked,element.data_field);}else{var _element$value2;setValue((_element$value2=element.value)!=null?_element$value2:element.label);}},type:block.typeName})},element.label);})});}var styles=_reactNative.StyleSheet.create({buttonsCol:{flex:1,flexDirection:'column',gap:(0,_styles.spacing)(0.5)},buttonsRow:{flex:1,flexDirection:'row',gap:(0,_styles.spacing)(0.5),flexWrap:'wrap'}});